(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,a){e.exports=a(51)},26:function(e,t,a){},27:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(18),r=a.n(l),o=(a(26),a(27),a(1)),u=function(e){return c.a.createElement("div",null,c.a.createElement("h1",null,"Favorite authors"))},i=a(4),m=a.n(i),s=a(6),E=a(5),d=a(2),h=function(e){var t=Object(n.useState)({name:""}),a=Object(d.a)(t,2),l=a[0],r=a[1],u=Object(n.useState)({name:""}),i=Object(d.a)(u,2),h=i[0],p=i[1],b=Object(n.useState)([]),f=Object(d.a)(b,2);f[0],f[1];return c.a.createElement("div",null,c.a.createElement("p",null,h.name),c.a.createElement(o.a,{style:{margin:"5px"},to:"/"},"Home"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m.a.post("http://localhost:8000/api/v1/create",l).then((function(e){e.data.errors?p({name:e.data.errors.name?e.data.errors.name.message:""}):(console.log("success"),Object(o.c)("/"))})).catch((function(e){return console.log(e)}))}},c.a.createElement("p",null,"Add a new author"),c.a.createElement("input",{type:"text",name:"name",onChange:function(e){r(Object(E.a)({},l,Object(s.a)({},e.target.name,e.target.value)))}}),c.a.createElement("button",{type:"submit"},"Submit")))},p=a(20),b=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),l=a[0],r=a[1],u=Object(n.useState)(!1),i=Object(d.a)(u,2),s=i[0],E=i[1];Object(n.useEffect)((function(){m.a.get("http://localhost:8000/api/v1/readAll").then((function(e){return r(Object(p.a)(e.data))})).catch((function(e){return console.log(e)}))}),[s]);return c.a.createElement("div",null,c.a.createElement(o.a,{style:{margin:"5px"},to:"/new"},"Add an author"),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Author"),c.a.createElement("th",null,"Actions"))),c.a.createElement("tbody",null,l.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,c.a.createElement(o.a,{to:"/details/".concat(e._id)},e.name)),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(t){return function(e,t){Object(o.c)("/edit/".concat(t._id))}(0,e)}},"Edit")," |",c.a.createElement("button",{onClick:function(t){return function(e,t){console.log(t._id),m.a.delete("http://localhost:8000/api/v1/deleteOne/".concat(t._id)).then((function(e){return E(!s)})).catch((function(e){return console.log(e)}))}(0,e)}},"DESTROY!")))})))))},f=function(e){var t=Object(n.useState)({}),a=Object(d.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(0),u=Object(d.a)(o,2),i=u[0],h=u[1];Object(n.useEffect)((function(){m.a.get("http://localhost:8000/api/v1/readOne/".concat(e.id)).then((function(e){r(Object(E.a)({},e.data));for(var t=0,a=0;a<e.data.reviews.length;a++)t+=e.data.reviews[a].rating;h(t/e.data.reviews.length)})).catch((function(e){return console.log(e)}))}),[]);var p=Object(n.useState)({comment:"",rating:1}),b=Object(d.a)(p,2),f=b[0],v=b[1],g=function(e){v(Object(E.a)({},f,Object(s.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",null,l.title?c.a.createElement("div",null,c.a.createElement("h1",null,l.title),c.a.createElement("p",null,l.description),c.a.createElement("img",{src:l.url,alt:""}),l.reviews.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("p",null,e.comment),c.a.createElement("p",null,e.rating))}))):null,c.a.createElement("h2",null,"Leave a review!"),c.a.createElement("h3",null,"Average Rating: ",i),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=Object(E.a)({},l);t.reviews.push(f),r(Object(E.a)({},t));for(var a=0,n=0;n<t.reviews.length;n++)n===t.reviews.length-1?a+=parseInt(t.reviews[n].rating):a+=t.reviews[n].rating;h(a/t.reviews.length),m.a.put("http://localhost:8000/api/v1/updateOne/".concat(l._id),t).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}},c.a.createElement("p",null,"Comment"),c.a.createElement("input",{type:"text",name:"comment",onChange:g}),c.a.createElement("p",null,"Rating"),c.a.createElement("select",{name:"rating",onChange:g},c.a.createElement("option",{value:"1"},"1"),c.a.createElement("option",{value:"2"},"2"),c.a.createElement("option",{value:"3"},"3"),c.a.createElement("option",{value:"4"},"4"),c.a.createElement("option",{value:"5"},"5")),c.a.createElement("button",{type:"submit"},"Submit")))},v=function(e){var t=Object(n.useState)({name:""}),a=Object(d.a)(t,2),l=a[0],r=a[1];Object(n.useEffect)((function(){m.a.get("http://localhost:8000/api/v1/readOne/".concat(e.id)).then((function(e){r(Object(E.a)({},e.data)),console.log(e.data)})).catch((function(e){return console.log(e)}))}),[]);var u=Object(n.useState)({name:""}),i=Object(d.a)(u,2),h=i[0],p=i[1],b=function(e){r(Object(E.a)({},l,Object(s.a)({},e.target.name,e.target.value)))},f=function(e){e.preventDefault(),m.a.put("http://localhost:8000/api/v1/updateOne/".concat(l._id),l).then((function(e){console.log(e.data),e.data.errors?p({name:e.data.errors.name?e.data.errors.name.message:""}):(console.log("success"),Object(o.c)("/"))})).catch((function(e){return console.log(e)}))};return c.a.createElement("div",null,"CastError"===l.name?c.a.createElement("div",null,c.a.createElement("p",null,"We're sorry, but we could not find the author you are looking for. Would you like to add this author to our database?"),c.a.createElement(o.a,{style:{margin:"5px"},to:"/new"},"Add an author")):c.a.createElement("div",null,c.a.createElement("p",null,h.name),c.a.createElement(o.a,{style:{margin:"5px"},to:"/"},"Home"),c.a.createElement("form",{onSubmit:f},c.a.createElement("p",null,"Edit this author"),c.a.createElement("input",{type:"text",name:"name",onChange:b,value:l.name}),c.a.createElement("button",{type:"submit"},"Submit"),c.a.createElement("button",{type:"cancel",onClick:function(e){return Object(o.c)("/")}},"Cancel"))))};var g=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(u,null),c.a.createElement(o.b,null,c.a.createElement(b,{path:"/"}),c.a.createElement(h,{path:"/new"}),c.a.createElement(f,{path:"/details/:id"}),c.a.createElement(v,{path:"/edit/:id"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.30613b95.chunk.js.map